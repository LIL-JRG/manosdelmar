---
const formId = "c2d958dac5130af168d1d54f6b0ddfe3";
---

<section
  class="relative min-h-screen bg-[#fef9f3] flex items-center justify-center px-4 sm:px-8 lg:px-20 py-16 overflow-hidden"
>

 <div class="absolute inset-0 z-0">
    <img
      src="/img/Background/HeroBackground.webp"
      alt="Fondo decorativo"
      class="w-full h-full object-cover opacity-10"
      loading="lazy"
    />
  </div>

  <div
    class="relative z-10 max-w-3xl w-full bg-white/60 backdrop-blur-lg rounded-xl shadow-lg p-8 space-y-8 text-[#3b2e2a] animate-fadeIn"
  >
    <div class="text-center">
      <h2 class="text-3xl font-bold mb-2">Contáctanos</h2>
      <div class="w-24 h-1 mx-auto bg-[#a1583c] rounded-full mb-4"></div>
      <p class="text-base">
        ¿Tienes alguna pregunta o quieres colaborar? Llena el formulario.
      </p>
    </div>

    <form
      id="contact-form"
      class="space-y-6"
      action={`https://formsubmit.co/ajax/${formId}`}
      method="POST"
      novalidate
    >
      <div class="relative">
        <span
          class="absolute left-3 top-1/2 transform -translate-y-1/2 text-[#a1583c] text-xl"
          aria-hidden="true"
        >
          <svg
            class="w-5 h-5 text-[#a1583c]"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 12c2.28 0 4-1.72 4-4s-1.72-4-4-4-4 1.72-4 4 1.72 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
            ></path>
          </svg>
        </span>
        <input
          type="text"
          name="name"
          placeholder="Tu nombre"
          class="w-full border border-[#a1583c] rounded-md py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-[#a1583c]"
          required
          aria-label="Nombre"
        />
      </div>

      <div class="relative">
        <span
          class="absolute left-3 top-1/2 transform -translate-y-1/2 text-[#a1583c] text-xl"
          aria-hidden="true"
        >
          <svg
            class="w-5 h-5 text-[#a1583c]"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 12H8m8 0H8m8 0H8"></path>
          </svg>
        </span>
        <input
          type="email"
          name="email"
          placeholder="Tu correo electrónico"
          class="w-full border border-[#a1583c] rounded-md py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-[#a1583c]"
          required
          aria-label="Correo electrónico"
        />
      </div>

      <div class="relative">
        <span
          class="absolute left-3 top-3 text-[#a1583c] text-xl"
          aria-hidden="true"
        >
          <svg
            class="w-5 h-5 text-[#a1583c]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            width="200"
            height="200"
            viewBox="0 0 20 20"
            ><path
              fill="currentColor"
              d="M10 0c5.342 0 10 4.41 10 9.5c0 5.004-4.553 8.942-10 8.942a11.01 11.01 0 0 1-3.43-.546c-.464.45-.623.603-1.608 1.553c-.71.536-1.378.718-1.975.38c-.602-.34-.783-1.002-.66-1.874l.4-2.319C.99 14.002 0 11.842 0 9.5C0 4.41 4.657 0 10 0Zm0 1.4c-4.586 0-8.6 3.8-8.6 8.1c0 2.045.912 3.928 2.52 5.33l.02.017l.297.258l-.067.39l-.138.804l-.037.214l-.285 1.658a2.79 2.79 0 0 0-.03.337v.095c0 .005-.001.007-.002.008c.007-.01.143-.053.376-.223l2.17-2.106l.414.156a9.589 9.589 0 0 0 3.362.605c4.716 0 8.6-3.36 8.6-7.543c0-4.299-4.014-8.1-8.6-8.1ZM5.227 7.813a1.5 1.5 0 1 1 0 2.998a1.5 1.5 0 0 1 0-2.998Zm4.998 0a1.5 1.5 0 1 1 0 2.998a1.5 1.5 0 0 1 0-2.998Zm4.997 0a1.5 1.5 0 1 1 0 2.998a1.5 1.5 0 0 1 0-2.998Z"
            ></path></svg
          >
        </span>
        <textarea
          name="message"
          placeholder="Escribe tu mensaje..."
          rows="5"
          class="w-full border border-[#a1583c] rounded-md py-2 pl-10 resize-none focus:outline-none focus:ring-2 focus:ring-[#a1583c]"
          required
          aria-label="Mensaje"></textarea>
      </div>

      <button
        id="submit-button"
        type="submit"
        class="w-full bg-[#a1583c] hover:bg-[#8c442b] text-white font-semibold py-2 px-4 rounded-md transition-colors cursor-pointer"
      >
        Enviar
      </button>

      <p
        id="response-message"
        class="mt-4 text-center font-medium hidden"
        role="alert"
      >
      </p>
    </form>
  </div>

  <script type="module">
    const form = document.getElementById("contact-form");
    const responseMessage = document.getElementById("response-message");
    const submitButton = document.getElementById("submit-button");

    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      submitButton.disabled = true;
      submitButton.textContent = "Enviando...";
      responseMessage.classList.add("hidden");
      responseMessage.textContent = "";
      responseMessage.classList.remove("text-green-600", "text-red-600");

      const formData = new FormData(form);
      try {
        const res = await fetch(form.action, {
          method: "POST",
          body: formData,
          headers: { Accept: "application/json" },
        });

        submitButton.disabled = false;
        submitButton.textContent = "Enviar";

        if (res.ok) {
          responseMessage.textContent =
            "¡Gracias por contactarnos! Te responderemos pronto.";
          responseMessage.classList.remove("hidden");
          responseMessage.classList.add("text-green-600");
          form.reset();
        } else {
          const data = await res.json();
          responseMessage.textContent =
            data?.message || "Error al enviar el formulario, intenta de nuevo.";
          responseMessage.classList.remove("hidden");
          responseMessage.classList.add("text-red-600");
        }
      } catch (error) {
        submitButton.disabled = false;
        submitButton.textContent = "Enviar";
        responseMessage.textContent =
          "Error de conexión, por favor intenta más tarde.";
        responseMessage.classList.remove("hidden");
        responseMessage.classList.add("text-red-600");
      }
    });
  </script>
</section>
